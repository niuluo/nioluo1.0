var loginModel=angular.module("LoginModel",["ManagementHttpModule"]);loginModel.service("LoginService",["ManagementHttpService","ResourceFactory","$location",function(c,b,d){var a={};a.login=function(g){var h=g.user;var f=d.absUrl();try{c.loginRequest(h,b.operateCode.get,function(e){g.isLoading=false;if(e.Header.StatusCode==0){b.saveDataToSession("CurrentUser",e.Body);b.saveDataToSession("Header",e.Header);if(f.indexOf("Management")>-1){window.location.href="../Management/MBClinicMG.html"}else{window.location.href="../WebPages/MBClinicMG.html"}}else{alert(GetErrormsg(e.Header.StatusCode))}},function(e){console.log(e)})}catch(i){console.log(i)}};return a}]);loginModel.controller("LoginController",["$scope","LoginService","ResourceFactory",function(c,b,a){c.initialize=function(){c.isLoading=false;var e="../../Images/logo.ico";var d="纽罗口腔管理平台";$("title").html(d);$("#icon_link").prop("href",e);c.user={UserName:"",Password:""}};c.enterLogin=function(f){var d=window.event?f.keyCode:f.which;if(d==13){c.login()}};c.login=function(){if(c.user.UserName!="Administrator"){if(a.checkFormat(c.user.UserName,DataTypeEnum.PhoneMobile)){c.isLoading=true;b.login(c);return}$("#username").tooltip("show");return}c.isLoading=true;b.login(c)};c.initialize()}]);angular.bootstrap($("#login"),["LoginModel"]);