<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" user-scalable="no">
    <title></title>
    <link rel="icon" href="" type="image/x-icon" id="icon_link"/>
    <link href="../css/Common/bootstrap.min.css" rel="stylesheet">
    <link href="../css/Common/font-awesome.css" rel="stylesheet"/>
    <link href="../css/Custom/style.css" rel="stylesheet">
    <link href="../css/Common/validationEngine.jquery.css" rel="stylesheet">
    <link href="../css/Common/jquery-ui.min.css" rel="stylesheet">
    <link href="../css/Common/bootstrap-datetimepicker.min.css?03.14" rel="stylesheet">
</head>
<body class="cus_main_height">
<div class="modal fade" id="loading_div" tabindex="-1" role="dialog"
     aria-labelledby="myModalLabel" aria-hidden="true" data-backdrop="static">
    <div class="modal-dialog modal_dialog_custom">
        <div class="cus_spinner">
            <div class="cus_spinner-container cus_container1">
                <div class="circle1"></div>
                <div class="circle2"></div>
                <div class="circle3"></div>
                <div class="circle4"></div>
            </div>
            <div class="cus_spinner-container cus_container2">
                <div class="circle1"></div>
                <div class="circle2"></div>
                <div class="circle3"></div>
                <div class="circle4"></div>
            </div>
            <div class="cus_spinner-container cus_container3">
                <div class="circle1"></div>
                <div class="circle2"></div>
                <div class="circle3"></div>
                <div class="circle4"></div>
            </div>
        </div>
    </div>
</div>
<aside class="body_hide left_menu">
    <section ng-controller="MenuController">
        <menu></menu>
        <info></info>
        <login></login>
        <!--<push></push>-->
    </section>
</aside>
<div id="main-content" class="cus_main_height main_width body_hide">
    <div class="wrapper" ng-controller="QuestionOrdersController">
        <div class="menu_header">
            <div ng-class="{'plat_menu menu_active': isAccount, 'plat_menu menu_disabled': !isAccount}"
                 ng-click="accountShow();">
                <span>分期账单</span>
            </div>
            <div ng-class="{'plat_menu menu_active': !isAccount, 'plat_menu menu_disabled': isAccount}"
                 ng-click="questionShow();">
                <span>问题订单处理</span>
            </div>
            <div class="plat_search" ng-show="isAccount">
                    <span class="cus_float_rg">
                        <a href="javascript:void(0);" class="icon-search search-appoints_1"
                           ng-click="customSearchOfAccount();"
                           title="搜索"></a>
                    </span>
                <span class="cus_float_rg">
                        <input type="text" placeholder="订单号"
                               class="form-control round-input" readonly="readonly"
                               ng-model="searchPar_Account.OrderIDs" ng-click="showInputModal(1);">
                    </span>
                    <span class="cus_float_rg">
                        <input type="text" placeholder="结束时间"
                               class="form-control round-input" id="endTime2"
                               ng-model="searchPar_Account.EndTimeText">
                    </span>
                <span class="cus_float_rg">~</span>
                    <span class="cus_float_rg">
                        <input type="text" placeholder="开始时间"
                               class="form-control round-input" id="startTime2"
                               ng-model="searchPar_Account.StartTimeText">
                    </span>
            </div>
            <div class="plat_search" ng-show="!isAccount">
                    <span class="cus_float_rg">
                        <a href="javascript:void(0);" class="icon-search search-appoints_1"
                           ng-click="customSearchOfQuestion();"
                           title="搜索"></a>
                    </span>
                <!--<span class="cus_float_rg">-->
                <!--<select style="width: 150px"-->
                <!--ng-model="searchPar_Question.HandleStatus"-->
                <!--ng-options="x.Value as x.Text for x in TypeList">-->
                <!--<option value="">全部</option>-->
                <!--</select>-->
                <!--</span>-->
                <!--<span class="cus_float_rg">-->
                <!--<input type="text" placeholder="创建人"-->
                <!--class="form-control round-input"-->
                <!--ng-model="searchPar_Question.Name">-->
                <!--</span>-->
                    <span class="cus_float_rg">
                        <input type="text" placeholder="订单号"
                               class="form-control round-input" readonly="readonly"
                               ng-model="searchPar_Question.OrderIDs" ng-click="showInputModal(2);">
                    </span>
                    <span class="cus_float_rg">
                        <input type="text" placeholder="结束时间"
                               class="form-control round-input" id="endTime"
                               ng-model="searchPar_Question.EndTimeText">
                    </span>
                <span class="cus_float_rg">~</span>
                    <span class="cus_float_rg">
                        <input type="text" placeholder="开始时间"
                               class="form-control round-input" id="startTime"
                               ng-model="searchPar_Question.StartTimeText">
                    </span>
            </div>
        </div>
        <div class="cl_con_h" style="position: relative">
            <div class="cl_out" ng-show="isAccount">
                <div class="cus_table" ng-controller="AccountController">
                    <table class="table table-striped" style="margin-bottom: 0px;">
                        <thead>
                        <tr>
                            <td style="width:10%;color: white;">订单号</td>
                            <td style="width:10%;color: white;">患者姓名</td>
                            <td style="width:10%;color: white;">联系电话</td>
                            <td style="width:10%;color: white;">账单时间</td>
                            <td style="width:10%;color: white;">收银项目</td>
                            <td style="width:10%;color: white;">应收金额</td>
                            <td style="width:10%;color: white;">实收金额</td>
                            <td style="width:10%;color: white;">退费金额</td>
                            <td style="width:10%;color: white;">账单状态</td>
                            <td style="width:10%;color: white;">操作</td>
                        </tr>
                        </thead>
                        <tbody>
                        <tr ng-repeat="item in PayCheckList">
                            <td style="width:10%;" ng-bind="item.OrderNo" title="{{item.OrderNo}}"></td>
                            <td style="width:10%;" ng-bind="item.PatientName"></td>
                            <td style="width:10%;" ng-bind="item.Mobile"></td>
                            <td style="width:10%;" ng-bind="item.Time" title="{{item.Time}}"></td>
                            <td style="width:10%;" ng-bind="item.ItemNames" title="{{item.ItemNames}}"></td>
                            <td style="width:10%;color:#ff6600">
                                <span>￥</span><span ng-bind="item.DueCharge"></span>
                            </td>
                            <td style="width:10%;color:#ff6600">
                                <span>￥</span><span ng-bind="item.RealCharge"></span>
                            </td>
                            <td style="width:10%;color:#ff6600">
                                <span>￥</span><span ng-bind="item.RefundAmount"></span>
                            </td>
                            <td style="width:10%;" ng-bind="StatusText(item.BillStatus)"></td>
                            <td style="width:10%;">
                                <a href="javascript:void(0);" ng-click="showRefundReason(item);"
                                   ng-show="item.RealCharge > 0">退 费</a>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                    <div class="pull-right" style="margin-top: 20px;" ng-show="totalList">
                        <span style="margin-right: 20px;">
                            <span>总收入:</span>
                            <span style="margin-right: 20px;color:#ff6600">
                                <span>￥</span><span ng-bind="totalList.totalPayAmount"></span>
                            </span>
                        </span>
                        <span style="margin-right: 20px;">
                            <span>总退款:</span>
                            <span style="margin-right: 20px;color:#ff6600">
                                <span>￥</span><span ng-bind="totalList.totalRefundAmount"></span>
                            </span>
                        </span>
                        <span style="margin-right: 20px;">
                            <span>总金额:</span>
                            <span style="margin-right: 20px;color:#ff6600">
                                <span>￥</span><span
                                    ng-bind="totalList.totalPayAmount-totalList.totalRefundAmount"></span>
                            </span>
                        </span>
                    </div>
                    <pagination></pagination>
                    <!-- 退费理由 Begin -->
                    <div class="modal fade" id="refundReasonAccount" tabindex="-1" role="dialog" aria-hidden="true"
                         data-backdrop="static">
                        <div class="modal-dialog">
                            <div class="modal-content modal_content_custom">
                                <div class="modal-header modal_head modal_header_height">
                                    <div data-dismiss="modal" aria-hidden="true"
                                         style='display:inline-block;float:right;' title="关闭">
                                        <span class='icon-stack'>
                                            <i class='icon-check-empty icon-stack-base'></i>
                                            <i class='icon-remove icon-light'></i>
                                        </span>
                                    </div>
                                    <span class="head_title">退款</span>
                                </div>
                                <div class="modal-body">
                                    <!--<div class="pt_item_sp">
                                        <textarea class="txt_area" style="width: 100%;height: 180px;" title="退费理由"
                                                  placeholder="字符不超过200"
                                                  ng-model="confirmItem.RefundReason"></textarea>
                                    </div>-->
                                    <div class="pt_item_sp pt_item_h">
                                        <span class="cus_float_lf txt_rg" style="font-weight: 700">订单信息</span>
                                    </div>
                                    <div class="pt_item_sp pt_item_h">
                                        <span class="cus_float_lf bell_item_w_2 txt_rg">收银项目：</span>
                                        <span class="cus_float_lf bell_item_w_4 txt_lf"
                                              style="font-weight: 700;white-space: nowrap;overflow: hidden;text-overflow: ellipsis"
                                              ng-bind="showItemNames(confirmItem.ItemNames)"></span>
                                        <span class="cus_float_lf bell_item_w_2 txt_rg">订单时间：</span>
                                        <span class="cus_float_lf bell_item_w_4 txt_lf"
                                              ng-bind="confirmItem.Time"></span>
                                    </div>
                                    <div class="pt_item_sp pt_item_h">
                                        <span class="cus_float_lf bell_item_w_2 txt_rg">订单号：</span>
                                        <span class="cus_float_lf bell_item_w_4 txt_lf"
                                              style="white-space: nowrap;overflow: hidden;text-overflow: ellipsis"
                                              ng-bind="confirmItem.OrderNo"></span>
                                        <!--<span class="cus_float_lf bell_item_w_2 txt_rg">交易单号：</span>-->
                                        <!--<span class="cus_float_lf bell_item_w_4 txt_lf">xxxx</span>-->
                                        <span class="cus_float_lf bell_item_w_2 txt_rg">&nbsp;</span>
                                        <span class="cus_float_lf bell_item_w_4 txt_lf">&nbsp;</span>
                                    </div>
                                    <div class="pt_item_sp pt_item_h">
                                        <span class="cus_float_lf bell_item_w_2 txt_rg">付款金额：</span>
                                        <span class="cus_float_lf bell_item_w_4 txt_lf"
                                              style="font-weight: 700;font-size: 18px;color: #ff6600;">￥<span
                                                ng-bind="confirmItem.RealCharge"></span></span>
                                        <span class="cus_float_lf bell_item_w_2 txt_rg">订单状态：</span>
                                        <span class="cus_float_lf bell_item_w_4 txt_lf"
                                              ng-bind="StatusText(confirmItem.BillStatus)"></span>
                                    </div>
                                    <div class="pt_item_sp pt_item_h">
                                        <span class="cus_float_lf txt_rg" style="font-weight: 700">用户信息</span>
                                    </div>
                                    <div class="pt_item_sp pt_item_h">
                                        <span class="cus_float_lf bell_item_w_2 txt_rg">用户姓名：</span>
                                        <span class="cus_float_lf bell_item_w_4 txt_lf"
                                              style="font-weight: 700" ng-bind="confirmItem.PatientName"></span>
                                        <span class="cus_float_lf bell_item_w_2 txt_rg">联系电话：</span>
                                        <span class="cus_float_lf bell_item_w_4 txt_lf"
                                              ng-bind="confirmItem.Mobile"></span>
                                    </div>
                                    <div class="pt_item_sp pt_item_h">
                                        <span class="cus_float_lf bell_item_w_2 txt_rg">付款方式：</span>
                                        <span class="cus_float_lf bell_item_w_4 txt_lf">工银e支付</span>
                                        <span class="cus_float_lf bell_item_w_2 txt_rg">付款状态：</span>
                                        <span class="cus_float_lf bell_item_w_4 txt_lf">已支付</span>
                                    </div>
                                    <div class="pt_item_sp pt_item_h"
                                         ng-if="confirmItem.Description && confirmItem.BillStatus == 5">
                                        <span class="cus_float_lf bell_item_w_2 txt_rg">问题类型：</span>
                                        <span class="cus_float_lf bell_item_w_4 txt_lf">申退</span>
                                    </div>
                                    <div class="pt_item_sp pt_item_h"
                                         ng-if="confirmItem.Description && confirmItem.BillStatus == 5">
                                        <span class="cus_float_lf bell_item_w_2 txt_rg">申退原因：</span>
                                        <span class="cus_float_lf txt_lf" ng-bind="confirmItem.Description"></span>
                                    </div>
                                    <div class="pt_item_sp pt_item_h">
                                        <span class="cus_float_lf txt_rg" style="font-weight: 700">处理该订单</span>
                                    </div>
                                    <div class="pt_item_sp pt_item_h">
                                        <input class="form-control bell_item_w_4" type="text"
                                               placeholder="退费金额" ng-model="confirmItem.toBeRefund"/>
                                    </div>
                                    <div class="pt_item_sp pt_item_h_1 txt_cen">
                                        <span class="bell_item_w_2">
                                            <button class="btn cus_btn_color cus_btn_width" ng-click="confirmRefund();">
                                                确定退款
                                            </button>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- 退费理由 End -->
                </div>
            </div>
            <div class="cl_out" ng-show="!isAccount">
                <div class="cus_table" ng-controller="QuestionController">
                    <table class="table table-striped" style="margin-bottom: 0px;">
                        <thead>
                        <tr>
                            <td style="width:15%;color: white;">订单号</td>
                            <td style="width:10%;color: white;">患者姓名</td>
                            <td style="width:10%;color: white;">联系电话</td>
                            <td style="width:15%;color: white;">账单时间</td>
                            <td style="width:20%;color: white;">收银项目</td>
                            <td style="width:10%;color: white;">应收金额</td>
                            <!--<td style="width:10%;color: white;">问题状态</td>-->
                            <td style="width:10%;color: white;">账单状态</td>
                            <td style="width:10%;color: white;">操作</td>
                        </tr>
                        </thead>
                        <tbody>
                        <tr ng-repeat="item in PayCheckList">
                            <td style="width:15%;" ng-bind="item.OrderNo" title="{{item.OrderNo}}"></td>
                            <td style="width:10%;" ng-bind="item.PatientName"></td>
                            <td style="width:10%;" ng-bind="item.Mobile"></td>
                            <td style="width:15%;" ng-bind="item.Time"></td>
                            <td style="width:20%;" ng-bind="item.ItemNames" title="{{item.ItemNames}}"></td>
                            <td style="width:10%;color:#ff6600">
                                <span>￥</span><span ng-bind="item.DueCharge"></span>
                            </td>
                            <td style="width:10%;" ng-bind="StatusText(item.BillStatus)"></td>
                            <td style="width:10%;">
                                <a href="javascript:void(0);" ng-click="showRefundReason(item);"
                                   ng-show="item.BillStatus == 4 || item.BillStatus == 5">退 费</a>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                    <pagination></pagination>
                    <!-- 退费理由 Begin -->
                    <div class="modal fade" id="refundReason" tabindex="-1" role="dialog" aria-hidden="true"
                         data-backdrop="static">
                        <div class="modal-dialog">
                            <div class="modal-content modal_content_custom">
                                <div class="modal-header modal_head modal_header_height">
                                    <div data-dismiss="modal" aria-hidden="true"
                                         style='display:inline-block;float:right;' title="关闭">
                                        <span class='icon-stack'>
                                            <i class='icon-check-empty icon-stack-base'></i>
                                            <i class='icon-remove icon-light'></i>
                                        </span>
                                    </div>
                                    <span class="head_title">问题订单退款</span>
                                </div>
                                <div class="modal-body">
                                    <!--<div class="pt_item_sp">
                                        <textarea class="txt_area" style="width: 100%;height: 180px;" title="退费理由"
                                                  placeholder="字符不超过200"
                                                  ng-model="confirmItem.RefundReason"></textarea>
                                    </div>-->
                                    <div class="pt_item_sp pt_item_h">
                                        <span class="cus_float_lf txt_rg" style="font-weight: 700">订单信息</span>
                                    </div>
                                    <div class="pt_item_sp pt_item_h">
                                        <span class="cus_float_lf bell_item_w_2 txt_rg">收银项目：</span>
                                        <span class="cus_float_lf bell_item_w_4 txt_lf"
                                              style="font-weight: 700;white-space: nowrap;overflow: hidden;text-overflow: ellipsis"
                                              ng-bind="showItemNames(confirmItem.ItemNames)"></span>
                                        <span class="cus_float_lf bell_item_w_2 txt_rg">订单时间：</span>
                                        <span class="cus_float_lf bell_item_w_4 txt_lf"
                                              ng-bind="confirmItem.Time"></span>
                                    </div>
                                    <div class="pt_item_sp pt_item_h">
                                        <span class="cus_float_lf bell_item_w_2 txt_rg">订单号：</span>
                                        <span class="cus_float_lf bell_item_w_4 txt_lf"
                                              style="white-space: nowrap;overflow: hidden;text-overflow: ellipsis"
                                              ng-bind="confirmItem.OrderNo"></span>
                                        <!--<span class="cus_float_lf bell_item_w_2 txt_rg">交易单号：</span>-->
                                        <!--<span class="cus_float_lf bell_item_w_4 txt_lf">xxxx</span>-->
                                        <span class="cus_float_lf bell_item_w_2 txt_rg">&nbsp;</span>
                                        <span class="cus_float_lf bell_item_w_4 txt_lf">&nbsp;</span>
                                    </div>
                                    <div class="pt_item_sp pt_item_h">
                                        <span class="cus_float_lf bell_item_w_2 txt_rg">付款金额：</span>
                                        <span class="cus_float_lf bell_item_w_4 txt_lf"
                                              style="font-weight: 700;font-size: 18px;color: #ff6600;">￥<span
                                                ng-bind="confirmItem.RealCharge"></span></span>
                                        <span class="cus_float_lf bell_item_w_2 txt_rg">订单状态：</span>
                                        <span class="cus_float_lf bell_item_w_4 txt_lf"
                                              ng-bind="StatusText(confirmItem.BillStatus)"></span>
                                    </div>
                                    <div class="pt_item_sp pt_item_h">
                                        <span class="cus_float_lf txt_rg" style="font-weight: 700">用户信息</span>
                                    </div>
                                    <div class="pt_item_sp pt_item_h">
                                        <span class="cus_float_lf bell_item_w_2 txt_rg">用户姓名：</span>
                                        <span class="cus_float_lf bell_item_w_4 txt_lf"
                                              style="font-weight: 700" ng-bind="confirmItem.PatientName"></span>
                                        <span class="cus_float_lf bell_item_w_2 txt_rg">联系电话：</span>
                                        <span class="cus_float_lf bell_item_w_4 txt_lf"
                                              ng-bind="confirmItem.Mobile"></span>
                                    </div>
                                    <div class="pt_item_sp pt_item_h">
                                        <span class="cus_float_lf bell_item_w_2 txt_rg">付款方式：</span>
                                        <span class="cus_float_lf bell_item_w_4 txt_lf">工银e支付</span>
                                        <span class="cus_float_lf bell_item_w_2 txt_rg">付款状态：</span>
                                        <span class="cus_float_lf bell_item_w_4 txt_lf">已支付</span>
                                    </div>
                                    <div class="pt_item_sp pt_item_h">
                                        <span class="cus_float_lf bell_item_w_2 txt_rg">问题类型：</span>
                                        <span class="cus_float_lf bell_item_w_4 txt_lf">申退</span>
                                    </div>
                                    <div class="pt_item_sp pt_item_h">
                                        <span class="cus_float_lf bell_item_w_2 txt_rg">申退原因：</span>
                                        <span class="cus_float_lf txt_lf" ng-bind="confirmItem.Description"></span>
                                    </div>
                                    <div class="pt_item_sp pt_item_h">
                                        <span class="cus_float_lf txt_rg" style="font-weight: 700">处理该问题订单</span>
                                    </div>
                                    <div class="pt_item_sp pt_item_h">
                                        <input class="form-control bell_item_w_4" type="text"
                                               placeholder="退费金额" ng-model="confirmItem.toBeRefund"/>
                                    </div>
                                    <div class="pt_item_sp pt_item_h_1 txt_cen">
                                        <span class="bell_item_w_2">
                                            <button class="btn cus_btn_color cus_btn_width" ng-click="confirmRefund();">
                                                确定退款
                                            </button>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- 退费理由 End -->
                </div>
            </div>
        </div>
        <!-- 订单号-收银账单 Begin -->
        <div class="modal fade" id="noModal_account" tabindex="-1" role="dialog" aria-hidden="true"
             data-backdrop="static">
            <div class="modal-dialog">
                <div class="modal-content modal_content_custom">
                    <div class="modal-header modal_head modal_header_height">
                        <div data-dismiss="modal" aria-hidden="true"
                             style='display:inline-block;float:right;' title="关闭">
                                        <span class='icon-stack'>
                                            <i class='icon-check-empty icon-stack-base'></i>
                                            <i class='icon-remove icon-light'></i>
                                        </span>
                        </div>
                        <span class="head_title">订单号</span>
                    </div>
                    <div class="modal-body">
                        <textarea class="txt_area" style="width: 100%;height: 180px;" title="订单号" placeholder="以逗号分割"
                                  ng-model="searchPar_Account.OrderIDs"></textarea>
                    </div>
                </div>
            </div>
        </div>
        <!-- 订单号-收银账单 End -->
        <!-- 订单号-收银账单 Begin -->
        <div class="modal fade" id="noModal_question" tabindex="-1" role="dialog" aria-hidden="true"
             data-backdrop="static">
            <div class="modal-dialog">
                <div class="modal-content modal_content_custom">
                    <div class="modal-header modal_head modal_header_height">
                        <div data-dismiss="modal" aria-hidden="true"
                             style='display:inline-block;float:right;' title="关闭">
                                        <span class='icon-stack'>
                                            <i class='icon-check-empty icon-stack-base'></i>
                                            <i class='icon-remove icon-light'></i>
                                        </span>
                        </div>
                        <span class="head_title">订单号</span>
                    </div>
                    <div class="modal-body">
                        <textarea class="txt_area" style="width: 100%;height: 180px;" title="订单号" placeholder="以逗号分割"
                                  ng-model="searchPar_Question.OrderIDs"></textarea>
                    </div>
                </div>
            </div>
        </div>
        <!-- 订单号-收银账单 End -->
    </div>
</div>
<footer class="footer footer_pal body_hide">
    <span class="footer_span">Copyright &copy;2017 niuluo-tech.cn</span>
</footer>
</body>

<script src="../js/Common/Jquery/jquery-2.1.1.min.js"></script>
<script src="../js/Common/BootStrap/bootstrap.min.js"></script>
<script src="../js/Common/BootStrap/bootstrap-datetimepicker.min.js"></script>
<script src="../js/Common/BootStrap/bootstrap-datetimepicker.zh-CN.js"></script>
<script src="../js/Common/Angular/angular.min.1-4-6.js"></script>
<script src="../js/Common/Angular/angular-file-upload.1.3.1.js"></script>
<script src="../js/Common/Jquery/formValidator-4.1.3.js"></script>
<script src="../js/Common/Jquery/formValidatorRegex.js"></script>
<script src="../js/Common/Jquery/jquery.validationEngine.js"></script>
<script src="../js/Common/Jquery/jquery.validationEngine-zh_CN.js"></script>
<script src="../js/Common/Jquery/jquery-ui.min.js"></script>
<script src="../js/Common/GoEasy/goeasy.min.js"></script>
<script src="../js/Custom/common.min.js?v=20161024"></script>
<script src="../js/Custom/questionOrders.min.js?v=20161024"></script>
</html>