(function(b){var a=function(e,c,d){this.parent=b("#"+e);this.body=b("body");if(this.parent.length<=0){return false}this.options=b.extend({},a.options,c);if(typeof(d)!=="object"){return false}this.data=d||{};this.reset();var f=this;b(window).resize(function(){f.reset()})};a.prototype={reset:function(c){if(typeof(c)=="object"){b.extend(this.options,c)}this.total=this.data.length;this.pageNow=this.options.initPage;this.preLeft=0;this.nextLeft=this.options.width-(this.options.width/3);this.preNLeft=-(this.options.width/3);this.nextNLeft=this.options.width;this.pageNowLeft=(this.options.width)/4;this.drawContent()},drawContent:function(){this.parent.empty();this.parent.css({width:this.options.width+"px",height:this.options.height+"px",position:"relative"});this.content=document.createElement("DIV");this.content.className=this.options.className;this.content.cssText="width:"+this.options.width+"px;height:"+this.options.height+"px;cursor:move;position:absolute;";this.bottomNav=document.createElement("DIV");this.bottomNav.className="bottomNav";this.bottomNav.style.marginTop=parseInt(this.options.height)-100+"px";for(var f=1;f<=this.total;f++){var e=document.createElement("DIV");var h=document.createElement("DIV");var m=document.createElement("DIV");h.className="leftNav";m.className="rightNav";h.style.width="50px";h.style.borderRadius="8px";h.style.backgroundPositionY="50%";h.style.backgroundColor="darkgray";h.style.marginTop="0";h.style.height="60px";m.style.width="50px";m.style.height="60px";m.style.borderRadius="8px";m.style.backgroundPositionY="50%";m.style.backgroundColor="darkgray";m.style.marginTop="0";if(this.total*100>=this.options.width){h.style.left="7px";m.style.right="7px"}else{h.style.left=(this.options.width-this.total*100)/2-70+"px";m.style.right=(this.options.width-this.total*100)/2-70+"px"}var g=document.createElement("IMG");g.src=this.data[f-1].img;if(f==1){this.bottomNav.appendChild(h)}e.appendChild(g);e.className="bottomNavButtonOFF";if(f==this.pageNow){e.className="bottomNavButtonOFF bottomNavButtonON"}e.setAttribute("ref",f);this.bottomNav.appendChild(e);if(f==this.total){this.bottomNav.appendChild(m)}}this.content.appendChild(this.bottomNav);this.bannerControls='<div class="bannerControls"> <div class="leftNav" style="display: block;"></div> <div class="rightNav" style="display: block;"></div> </div>';this.content.innerHTML+=this.bannerControls;this.contentHolder=document.createElement("DIV");this.contentHolder.style.width=this.options.width+"px";this.contentHolder.style.height=this.options.height+"px";for(var j=0,f=1,d=this.data.length;j<d;++j,++f){var c=document.createElement("DIV");c.className="contentHolderUnit";c.setAttribute("ref",f);c.setAttribute("id","contentHolderUnit"+(f));var k='<a href="'+this.data[j].url+'" target="_blank" class="elementLink">';k+="</a>";k+='<img src="'+this.data[j].img+'" alt="'+this.data[j].title+'"/>';k+='<span class="elementOverlay"></span>';k+='<span class="leftShadow"></span>';k+='<span class="rightShadow"></span>';c.innerHTML=k;this.contentHolder.appendChild(c)}this.content.appendChild(this.contentHolder);this.parent.append(this.content);this.parent.css({overflow:"hidden"});this.initContent();this.bind();this.start()},initContent:function(){contentHolderUnit=this.parent.find(".contentHolderUnit");contentHolderUnit.css({width:"0px",height:"0px",opacity:0,left:this.options.width/2+"px",zIndex:0,marginTop:"135px"});this.parent.find(".contentHolderUnit:nth-child("+this.pageNow+")").css({width:this.options.width/2+"px",height:(this.options.width/3-100)+"px",opacity:1,left:this.pageNowLeft+"px",zIndex:3,marginTop:0});this.parent.find(".contentHolderUnit:nth-child("+this.pageNow+") .elementOverlay").css({opacity:0});this.parent.find(".contentHolderUnit:nth-child("+this.pageNow+") .leftShadow").css({opacity:1});this.parent.find(".contentHolderUnit:nth-child("+this.pageNow+") .rightShadow").css({opacity:1});var d=this.pageNow>1?this.pageNow-1:this.total;var c=this.pageNow==this.total?1:this.pageNow+1;this.parent.find(".contentHolderUnit:nth-child("+d+")").css({opacity:1,left:this.preLeft+"px",height:(this.options.width/3-150)+"px",width:this.options.width/3+"px",zIndex:0,marginTop:"23px"});this.parent.find(".contentHolderUnit:nth-child("+d+") .elementOverlay").css({opacity:0.4});this.parent.find(".contentHolderUnit:nth-child("+d+") .leftShadow").css({opacity:0});this.parent.find(".contentHolderUnit:nth-child("+d+") .rightShadow").css({opacity:0});this.parent.find(".contentHolderUnit:nth-child("+c+")").css({opacity:1,left:this.nextLeft+"px",height:(this.options.width/3-150)+"px",width:this.options.width/3+"px",zIndex:0,marginTop:"23px"});this.parent.find(".contentHolderUnit:nth-child("+c+") .elementOverlay").css({opacity:0.4});this.parent.find(".contentHolderUnit:nth-child("+c+") .leftShadow").css({opacity:0});this.parent.find(".contentHolderUnit:nth-child("+c+") .rightShadow").css({opacity:0})},bind:function(){this.leftNav=this.parent.find(".leftNav");this.rightNav=this.parent.find(".rightNav");this.bottonNav=this.parent.find(".bottomNavButtonOFF");this.lists=this.parent.find(".contentHolderUnit");var c=this;this.parent.mouseover(function(){c.stop();c.leftNav.show();c.rightNav.show()});this.parent.mouseout(function(){c.start()});c.leftNav.click(function(){c.turn("right")});c.rightNav.click(function(){c.turn("left")});c.bottonNav.click(function(){var e=parseInt(this.getAttribute("ref"));if(c.pageNow==e){return false}if(c.pageNow<e){var f=e-c.pageNow;var d=c.pageNow+c.total-e}else{var f=c.total-c.pageNow+e;var d=c.pageNow-e}if(d<f){dir="right"}else{dir="left"}c.turnpage(e,dir);return false});c.lists.click(function(h){var f=parseInt(this.getAttribute("ref"));if(c.pageNow==f){return true}else{h.preventDefault()}if(c.pageNow<f){var g=f-c.pageNow;var d=c.pageNow+c.total-f}else{var g=c.total-c.pageNow+f;var d=c.pageNow-f}if(d<g){dir="right"}else{dir="left"}c.turnpage(f,dir)})},initBottomNav:function(){this.parent.find(".bottomNavButtonOFF").removeClass("bottomNavButtonON");this.parent.find(".bottomNavButtonOFF[ref="+this.pageNow+"]").addClass("bottomNavButtonON")},start:function(){var c=this;if(c.timerId){c.stop()}c.timerId=setInterval(function(){if(c.options.direct=="left"){c.turn("left")}else{c.turn("right")}},c.options.delay)},stop:function(){clearInterval(this.timerId)},turn:function(c){var e=this;if(c=="right"){var d=e.pageNow-1;if(d<=0){d=e.total}}else{var d=e.pageNow+1;if(d>e.total){d=1}}e.turnpage(d,c)},turnpage:function(d,c){var f=this;if(f.locked){return false}f.locked=true;if(f.pageNow==d){return false}var e=function(l,g,n){var h=l>1?l-1:f.total;var k=l==f.total?1:l+1;var o=h-1>=1?h-1:f.total;var j=k+1>f.total?1:k+1;if(h!=f.pageNow&&k!=f.pageNow){var i=f.pageNow>1?f.pageNow-1:f.total;var m=f.pageNow==f.total?1:f.pageNow+1;f.parent.find(".contentHolderUnit:nth-child("+i+")").animate({width:"0px",height:"0px",opacity:0,left:f.options.width/2+"px",zIndex:0,marginTop:"135px"},n);f.parent.find(".contentHolderUnit:nth-child("+f.pageNow+")").animate({width:"0px",height:"0px",opacity:0,left:f.options.width/2+"px",zIndex:0,marginTop:"135px"},n);f.parent.find(".contentHolderUnit:nth-child("+m+")").animate({width:"0px",height:"0px",opacity:0,left:f.options.width/2+"px",zIndex:0,marginTop:"135px"},n)}if(g=="left"){f.parent.find(".contentHolderUnit:nth-child("+f.pageNow+")").css({zIndex:0});f.parent.find(".contentHolderUnit:nth-child("+h+") .elementOverlay").css({opacity:0.4});f.parent.find(".contentHolderUnit:nth-child("+h+")").animate({opacity:1,left:f.preLeft+"px",height:(f.options.width/3-150)+"px",width:f.options.width/3+"px",zIndex:2,marginTop:"23px"},n);f.parent.find(".contentHolderUnit:nth-child("+h+") .leftShadow").css({opacity:0});f.parent.find(".contentHolderUnit:nth-child("+h+") .rightShadow").css({opacity:0});f.parent.find(".contentHolderUnit:nth-child("+l+")").css({zIndex:3});f.parent.find(".contentHolderUnit:nth-child("+l+")").animate({opacity:1,left:f.pageNowLeft+"px",height:(f.options.width/3-100)+"px",width:f.options.width/2+"px",zIndex:3,marginTop:"0"},n);f.parent.find(".contentHolderUnit:nth-child("+l+") .elementOverlay").css({opacity:0});f.parent.find(".contentHolderUnit:nth-child("+l+") .leftShadow").css({opacity:1});f.parent.find(".contentHolderUnit:nth-child("+l+") .rightShadow").css({opacity:1});f.parent.find(".contentHolderUnit:nth-child("+k+")").css({opacity:0,left:f.nextNLeft+"px",height:"100px",width:f.options.width/3+"px",zIndex:2,marginTop:"85px"});f.parent.find(".contentHolderUnit:nth-child("+k+")").animate({opacity:1,left:f.nextLeft+"px",height:(f.options.width/3-150)+"px",width:f.options.width/3+"px",zIndex:2,marginTop:"23px"},n);f.parent.find(".contentHolderUnit:nth-child("+k+") .elementOverlay").css({opacity:0.4});f.parent.find(".contentHolderUnit:nth-child("+k+") .leftShadow").css({opacity:0});f.parent.find(".contentHolderUnit:nth-child("+k+") .rightShadow").css({opacity:0});f.parent.find(".contentHolderUnit:nth-child("+o+")").css({zIndex:0});f.parent.find(".contentHolderUnit:nth-child("+o+")").animate({width:"530px",height:"100px",opacity:0,left:f.preNLeft+"px",zIndex:0,marginTop:"85px"},n,"",function(){f.locked=false})}else{f.parent.find(".contentHolderUnit:nth-child("+f.pageNow+")").css({zIndex:0});f.parent.find(".contentHolderUnit:nth-child("+k+")").css({zIndex:2});f.parent.find(".contentHolderUnit:nth-child("+k+")").animate({opacity:1,left:f.nextLeft+"px",height:(f.options.width/3-150)+"px",width:f.options.width/3+"px",zIndex:2,marginTop:"23px"},n);f.parent.find(".contentHolderUnit:nth-child("+k+") .elementOverlay").css({opacity:0.4});f.parent.find(".contentHolderUnit:nth-child("+k+") .leftShadow").css({opacity:0});f.parent.find(".contentHolderUnit:nth-child("+k+") .rightShadow").css({opacity:0});f.parent.find(".contentHolderUnit:nth-child("+l+")").css({zIndex:3},n);f.parent.find(".contentHolderUnit:nth-child("+l+")").animate({opacity:1,left:f.pageNowLeft+"px",height:(f.options.width/3-100)+"px",width:f.options.width/2+"px",zIndex:3,marginTop:"0px"},n);f.parent.find(".contentHolderUnit:nth-child("+l+") .elementOverlay").css({opacity:0});f.parent.find(".contentHolderUnit:nth-child("+l+") .leftShadow").css({opacity:1});f.parent.find(".contentHolderUnit:nth-child("+l+") .rightShadow").css({opacity:1});f.parent.find(".contentHolderUnit:nth-child("+h+")").css({opacity:0,left:f.preNLeft+"px",height:"100px",width:f.options.width/3+"px",zIndex:2,marginTop:"85px"});f.parent.find(".contentHolderUnit:nth-child("+h+")").animate({opacity:1,left:f.preLeft+"px",height:(f.options.width/3-150)+"px",width:f.options.width/3+"px",zIndex:2,marginTop:"23px"},n);f.parent.find(".contentHolderUnit:nth-child("+h+") .elementOverlay").css({opacity:0.4});f.parent.find(".contentHolderUnit:nth-child("+h+") .leftShadow").css({opacity:0});f.parent.find(".contentHolderUnit:nth-child("+h+") .rightShadow").css({opacity:0});f.parent.find(".contentHolderUnit:nth-child("+j+")").css({zIndex:0});f.parent.find(".contentHolderUnit:nth-child("+j+")").animate({width:f.options.width/3+"px",height:"100px",opacity:0,left:f.nextNLeft+"px",zIndex:0,marginTop:"85px"},n,"",function(){f.locked=false})}f.pageNow=l;f.initBottomNav()};e(d,c,f.options.speed)}};a.options={offsetPages:3,direct:"left",initPage:1,className:"posterTvGrid",autoWidth:true,width:970,height:310,delay:5000,speed:500};window.posterTvGrid=a})(jQuery);