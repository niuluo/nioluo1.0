var medicalDetailModule=angular.module("MedicalDetailModule",["ResourceModule","HttpModule"]);medicalDetailModule.service("MedicalDetailService",["ResourceFactory","ManagementHttpService",function(b,c){var a={};a.initialize=function(d){};a.getTreatDetail=function(d){var h=b.getDataFromSession("CurrentMedicalRecord");var f={TreatID:h.Treat.TreatID};try{c.weTreatDetailRequest(f,b.operateCode.get,function(e){if(e.Header.StatusCode==0){d.currentMedicalDetail=e.Body}},function(e){alert("获取数据失败，请稍候重试！");console.log(e)})}catch(g){console.log(g)}};return a}]);medicalDetailModule.controller("MedicalDetailController",["$scope","MedicalDetailService",function(b,a){b.initialize=function(){b.currentMedicalDetail={};a.initialize(b);a.getTreatDetail(b)};b.getToothInfo=function(k){var l="";if(k){if(k.ToothType==1){l="恒牙"}if(k.ToothType==2){l="乳牙"}if(k.ToothPosition){var e="";var g="";var h="";var d="";var j=k.ToothPosition.split(",");for(var f=0;f<j.length;f++){var c=j[f].split("-");switch(c[0]){case"a":if(e){e=e+"，"+c[1]}else{e=e+"，左上第"+c[1]}break;case"b":if(g){g=g+"，"+c[1]}else{g=g+"，右上第"+c[1]}break;case"c":if(h){h=h+"，"+c[1]}else{h=h+"，左下第"+c[1]}break;case"d":if(d){d=d+"，"+c[1]}else{d=d+"，右下第"+c[1]}break;default:break}}if(e){e=e+"颗牙齿";l=l+e}if(g){e=e+"颗牙齿";l=l+e}if(h){h=h+"颗牙齿";l=l+h}if(d){d=d+"颗牙齿";l=l+d}}}return l};b.getFileCount=function(d){var c=0;if(b.currentMedicalDetail.TreatFileList!=undefined&&b.currentMedicalDetail.TreatFileList.length>0){switch(d){case 1:angular.forEach(b.currentMedicalDetail.TreatFileList,function(f,e,g){if(f.FileType==1){c++}});break;case 2:angular.forEach(b.currentMedicalDetail.TreatFileList,function(f,e,g){if(f.FileType==2){c++}});break;case 3:angular.forEach(b.currentMedicalDetail.TreatFileList,function(f,e,g){if(f.FileType==3){c++}});break;default:break}}return c};b.convertAppointTime=function(c){return new Date(c)};b.initialize()}]);angular.bootstrap($("#medical_record_detail"),["MedicalDetailModule"]);