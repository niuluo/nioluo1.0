var bookListModule=angular.module("BookModule",["ResourceModule","HttpModule"]);bookListModule.service("BookService",["ResourceService","ManagementHttpService","ResourceFactory",function(d,c,b){var a={};a.initialize=function(){};a.getPatientInfo=function(e){var f=e.requestData;c.wePatientRequest(f,b.operateCode.get,function(g){if(g.Header.StatusCode==0){b.saveDataToSession("CurrentPatient",g.Body);e.currentPatient=g.Body;a.searchAppoints(e)}else{alert(b.getErrorMsg(g.Header.StatusCode))}},function(g){console.log(g)})};a.searchAppoints=function(f){var g={PatientID:f.currentPatient.PatientID};try{c.weAppointRequest(g,b.operateCode.get,function(e){if(e.Header.StatusCode==0){f.apponitList=e.Body}else{alert(b.getErrorMsg(e.Header.StatusCode))}},function(e){alert("系统繁忙，请稍候重试！");console.log(e)})}catch(h){console.log(h)}};return a}]);bookListModule.controller("BookController",["$scope","BookService","ResourceService",function(a,b,c){a.initialize=function(){a.requestData={Code:c.getURLData("code")};b.initialize();b.getPatientInfo(a)};a.initialize()}]);angular.bootstrap($("#book_list"),["BookModule"]);