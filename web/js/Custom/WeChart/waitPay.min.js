var waitPayModule = angular.module("WaitPayModule", ["ResourceModule", "HttpModule"]);

waitPayModule.service("WaitPayService", ["ResourceFactory", "ManagementHttpService", function (ResourceFactory, ManagementHttpService) {
    var service = {};

    //初始化环境
    service.initialize = function ($scope) {
        $scope.currentPatient = ResourceFactory.getDataFromSession("CurrentPatient");
        $scope.currentAccount = ResourceFactory.getDataFromSession("CurrentAccount");
    };

    service.goToPay = function (item) {
        window.location.href = "Pay.html";
    };

    return service;
}]);

waitPayModule.controller("WaitPayController", ["$scope", "WaitPayService", function ($scope, WaitPayService) {
    //初始化环境
    $scope.initialize = function () {
        WaitPayService.initialize($scope);
    };

    $scope.goToPay = function() {
        WaitPayService.goToPay();
    }

    $scope.showName = function(cost) {
        if(!cost) {
            return "";
        }

        if(cost.CostItem) {
            return cost.CostItem;
        }

        if(cost.SubCategoryName) {
            return cost.SubCategoryName;
        }

        if(cost.CategoryName) {
            return cost.CategoryName;
        }

        return "";
    };

    $scope.initialize();
}]);

angular.bootstrap($("#wait_pay"), ["WaitPayModule"]);